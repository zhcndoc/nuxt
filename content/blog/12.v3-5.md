---
title: 'Nuxt 3.5'
description: "Nuxt 3.5.0 å·²å‘å¸ƒï¼Œå¸¦æ¥äº† Vue 3.3ã€æ–°çš„é»˜è®¤è®¾ç½®ã€äº¤äº’å¼æœåŠ¡å™¨ç»„ä»¶ã€å¸¦ç±»å‹çš„é¡µé¢ã€ç¯å¢ƒé…ç½®ç­‰ç­‰åŠŸèƒ½ã€‚"
image: /assets/blog/v3-5.png
authors:
  - name: Daniel Roe
    avatar:
      src: https://mark.ikxin.com/github/danielroe
    to: https://bsky.app/profile/danielroe.dev
date: 2023-05-16
category: Release
---

## âš¡ï¸ Vue 3.3 å‘å¸ƒ

Vue 3.3 å·²å‘å¸ƒï¼Œå¸¦æ¥äº†è®¸å¤šä»¤äººå…´å¥‹çš„åŠŸèƒ½ï¼Œç‰¹åˆ«æ˜¯ç±»å‹æ”¯æŒæ–¹é¢çš„åŠŸèƒ½ã€‚

* æ–°çš„ `defineOptions` å®
* 'generic' ç»„ä»¶
* å¸¦ç±»å‹çš„æ’æ§½å’Œåœ¨ `defineProps` ä¸­ä½¿ç”¨å¤–éƒ¨ç±»å‹
* ... è¿˜æœ‰æ›´å¤š

è¿™ä¹Ÿå¸¦æ¥äº†ä¸€ä¸ªæ˜¾è‘—çš„æ”¹è¿›ï¼Œå³åœ¨å¯¼èˆªåµŒå¥—é¡µé¢ä¹‹é—´è·å–æ•°æ®æ—¶ï¼ˆ[#20777](https://github.com/nuxt/nuxt/pull/20777)ï¼‰ï¼Œæ„Ÿè°¢ [@antfu](https://github.com/antfu) å’Œ [@baiwusanyu-c](https://github.com/baiwusanyu-c)ã€‚

é˜…è¯» **[å®Œæ•´çš„å‘å¸ƒå…¬å‘Š](https://blog.vuejs.org/posts/vue-3-3)** ä»¥äº†è§£æ›´å¤šè¯¦æƒ…ã€‚

### ğŸ™Œ Nitropack v2.4

æˆ‘ä»¬ä¸€ç›´åœ¨å¯¹ Nitro è¿›è¡Œå¤§é‡æ”¹è¿›ï¼Œè¿™äº›æ”¹è¿›å·²ç»åœ¨ Nitro v2.4 ä¸­å®ç° - ä½ å¯èƒ½å·²ç»è¿›è¡Œäº†è¿™æ¬¡å‡çº§ï¼Œå…¶ä¸­åŒ…å«äº†è®¸å¤šé”™è¯¯ä¿®å¤ã€å¯¹ Cloudflare çš„æ¨¡å—å·¥ä½œå™¨æ ¼å¼æ›´æ–°ã€Vercel KV æ”¯æŒç­‰ç­‰ã€‚

ä¸€ä¸ªæ³¨æ„äº‹é¡¹ï¼šå¦‚æœä½ æ­£åœ¨éƒ¨ç½²åˆ° Vercel æˆ– Netlifyï¼Œå¹¶ä¸”å¸Œæœ›ä»å¢é‡é™æ€å†ç”Ÿä¸­å—ç›Šï¼Œç°åœ¨åº”è¯¥æ›´æ–°ä½ çš„è·¯ç”±è§„åˆ™ï¼š

```diff
routeRules: {
--  '/blog/**': { swr: 3000 },
++  '/blog/**': { isr: 3000 },
}
```

é˜…è¯» **[å®Œæ•´çš„å‘å¸ƒè¯´æ˜](https://github.com/unjs/nitro/releases/tag/v2.4.0)**ã€‚

### ğŸ’– ä¸°å¯Œçš„ JSON æ•°æ®è½½è·

**é»˜è®¤æƒ…å†µä¸‹å¯ç”¨ä¸°å¯Œçš„ JSON æ•°æ®è½½è·åºåˆ—åŒ–**ï¼ˆ[#19205](https://github.com/nuxt/nuxt/pull/19205), [#20770](https://github.com/nuxt/nuxt/pull/20770)ï¼‰ã€‚
è¿™ä¸ä»…æ›´å¿«ï¼Œè¿˜å…è®¸å°†å¤æ‚å¯¹è±¡åºåˆ—åŒ–ä¸ºä» Nuxt æœåŠ¡å™¨ä¼ é€’ç»™å®¢æˆ·ç«¯çš„è½½è·ï¼ˆä»¥åŠä¸ºé¢„æ¸²æŸ“ç«™ç‚¹æå–è½½è·æ•°æ®æ—¶ï¼‰ã€‚

è¿™ç°åœ¨æ„å‘³ç€**å„ç§ä¸°å¯Œçš„ JavaScript ç±»å‹è¢«å¼€ç®±å³ç”¨æ”¯æŒ**ï¼šæ­£åˆ™è¡¨è¾¾å¼ã€æ—¥æœŸã€Map å’Œ Setï¼Œä»¥åŠ BigIntï¼Œè¿˜æœ‰è¯¸å¦‚ `ref`ã€`reactive`ã€`shallowRef` å’Œ `shallowReactive` ç­‰ Vue ç‰¹å®šå¯¹è±¡ã€‚

ä½ å¯ä»¥åœ¨æˆ‘ä»¬çš„æµ‹è¯•å¥—ä»¶ä¸­æ‰¾åˆ° [ä¸€ä¸ªç¤ºä¾‹](https://github.com/nuxt/nuxt/blob/main/test/fixtures/basic/pages/json-payload.vue)ã€‚

æ‰€æœ‰è¿™äº›å¾—ç›Šäº [Rich-Harris/devalue#58](https://github.com/Rich-Harris/devalue/pull/58)ã€‚é•¿æœŸä»¥æ¥ï¼ŒNuxt ä¸€ç›´åœ¨ä½¿ç”¨æˆ‘ä»¬è‡ªå·±çš„ devalue åˆ†æ”¯ï¼Œå› ä¸ºæ— æ³•åºåˆ—åŒ–é”™è¯¯å’Œå…¶ä»–é POJO å¯¹è±¡ï¼Œä½†ç°åœ¨æˆ‘ä»¬å·²ç»å›åˆ°äº†åŸå§‹ç‰ˆæœ¬ã€‚

ä½ ç”šè‡³å¯ä»¥ä½¿ç”¨æ–°çš„å¯¹è±¡è¯­æ³• Nuxt æ’ä»¶æ³¨å†Œè‡ªå®šä¹‰ç±»å‹ï¼š

```ts [plugins/custom-payload-type.ts]
export default definePayloadPlugin(() => {
  definePayloadReducer('BlinkingText', data => data === '<original-blink>' && '_')
  definePayloadReviver('BlinkingText', () => '<revivified-blink>')
})
```

ä½ å¯ä»¥åœ¨[è¿™é‡Œ](https://github.com/rich-harris/devalue#custom-types)é˜…è¯»æ›´å¤šå…³äºå®ƒçš„å·¥ä½œåŸç†ã€‚

## ğŸ› äº¤äº’å¼æœåŠ¡å™¨ç»„ä»¶

è¿™ä¸ªåŠŸèƒ½åº”è¢«è§†ä¸ºé«˜åº¦å®éªŒæ€§çš„ï¼Œä½†æ„Ÿè°¢ @huang-julien çš„æ°å‡ºå·¥ä½œï¼Œæˆ‘ä»¬ç°åœ¨æ”¯æŒé€šè¿‡ _slots_ åœ¨æœåŠ¡å™¨ç»„ä»¶ä¸­è¿›è¡Œäº¤äº’å¼å†…å®¹çš„å±•ç¤ºï¼ˆ[#20284](https://github.com/nuxt/nuxt/pull/20284)ï¼‰ã€‚

ä½ å¯ä»¥åœ¨ [#19772](https://github.com/nuxt/nuxt/issues/19772) ä¸Šå…³æ³¨æœåŠ¡å™¨ç»„ä»¶çš„è·¯çº¿å›¾ã€‚

## â° ç¯å¢ƒé…ç½®

ç°åœ¨ä½ å¯ä»¥åœ¨ä½ çš„ `nuxt.config` ä¸­é…ç½®å®Œå…¨å¸¦ç±»å‹çš„æ¯ä¸ªç¯å¢ƒè¦†ç›–ï¼š

```js
export default defineNuxtConfig({
  $production: {
    routeRules: {
      '/**': { isr: true }
    }
  },
  $development: {
    //
  }
})
```

å¦‚æœä½ æ­£åœ¨ç¼–å†™å±‚ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ `$meta` é”®æä¾›ä½ æˆ–ä½ çš„å±‚çš„æ¶ˆè´¹è€…å¯èƒ½ä½¿ç”¨çš„å…ƒæ•°æ®ã€‚

é˜…è¯»æ›´å¤šå…³äº[æ¯ä¸ªç¯å¢ƒè¦†ç›–](https://github.com/nuxt/nuxt/pull/20329)çš„å†…å®¹ã€‚

## ğŸ’ª å®Œå…¨å¸¦ç±»å‹çš„é¡µé¢

é€šè¿‡ä¸ [unplugin-vue-router](https://github.com/posva/unplugin-vue-router) çš„å®éªŒæ€§é›†æˆï¼Œä½ å¯ä»¥åœ¨ Nuxt åº”ç”¨ä¸­å……åˆ†å—ç›Šäºå¸¦ç±»å‹çš„è·¯ç”± - è¿™å¾—ç›Šäº [@posva](https://github.com/posva) çš„æ°å‡ºå·¥ä½œï¼

å¼€ç®±å³ç”¨åœ°ï¼Œè¿™å°†ä½¿å¾— [`navigateTo`](/docs/api/utils/navigate-to)ã€[`<NuxtLink>`](/docs/api/components/nuxt-link)ã€`router.push()` ç­‰å…·æœ‰ç±»å‹æ”¯æŒã€‚

ä½ ç”šè‡³å¯ä»¥é€šè¿‡ä½¿ç”¨ `const route = useRoute('route-name')`{lang=ts} åœ¨é¡µé¢ä¸­è·å–å¸¦ç±»å‹çš„å‚æ•°ã€‚

ç›´æ¥åœ¨ä½ çš„ `nuxt.config` ä¸­å¯ç”¨æ­¤åŠŸèƒ½ï¼š

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    typedPages: true
  }
})
```

## ğŸ” 'Bundler' æ¨¡å—è§£æ

ç°åœ¨ Nuxt å®Œå…¨æ”¯æŒ [æ¨¡å—è§£æ](https://www.typescriptlang.org/docs/handbook/module-resolution.html) çš„ `bundler` ç­–ç•¥ã€‚

å¦‚æœå¯èƒ½çš„è¯ï¼Œæˆ‘ä»¬å»ºè®®é‡‡ç”¨è¿™ç§ç­–ç•¥ã€‚å®ƒå¯¹å­è·¯å¾„å¯¼å‡ºæä¾›äº†ç±»å‹æ”¯æŒï¼Œä¾‹å¦‚ï¼Œä½†ä¸ `Node16` è§£æç›¸æ¯”ï¼Œæ›´å‡†ç¡®åœ°åŒ¹é…äº† Vite å’Œ Nuxt ç­‰æ„å»ºå·¥å…·çš„è¡Œä¸ºã€‚

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  typescript: {
    tsConfig: {
      compilerOptions: {
        moduleResolution: 'bundler'
      }
    }
  }
})
```

è¿™æ ·å°±å¯ç”¨äº† TypeScript çš„ 'follow' Node å­è·¯å¾„å¯¼å‡ºçš„èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªåº“æœ‰ä¸€ä¸ªå­è·¯å¾„å¯¼å‡º `mylib/path`ï¼Œå®ƒè¢«æ˜ å°„åˆ° `mylib/dist/path.mjs`ï¼Œé‚£ä¹ˆå¯¹äºæ­¤å¯¼å‡ºçš„ç±»å‹å¯ä»¥ä» `mylib/dist/path.d.ts` ä¸­å¼•å…¥ï¼Œè€Œä¸éœ€è¦åº“çš„ä½œè€…åˆ›å»º `mylib/path.d.ts`ã€‚

## âš—ï¸ åˆ†ç¦»çš„æœåŠ¡å™¨ç±»å‹

æˆ‘ä»¬è®¡åˆ’é€šè¿‡ä¸º [`~/server`](/docs/guide/directory-structure/server) ç›®å½•ç”Ÿæˆå•ç‹¬çš„ `tsconfig.json` æ¥æé«˜ IDE ä¸­ "nitro" éƒ¨åˆ†å’Œ "vue" éƒ¨åˆ†ä¹‹é—´çš„æ¸…æ™°åº¦ï¼ˆ[#20559](https://github.com/nuxt/nuxt/pull/20559)ï¼‰ã€‚

ä½ å¯ä»¥é€šè¿‡æ·»åŠ ä¸€ä¸ªé¢å¤–çš„ `~/server/tsconfig.json` æ–‡ä»¶æ¥ä½¿ç”¨ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```json
{
  "extends": "../.nuxt/tsconfig.server.json"
}
```

å°½ç®¡ç›®å‰è¿™äº›å€¼åœ¨ç±»å‹æ£€æŸ¥ï¼ˆ`nuxi typecheck`ï¼‰æ—¶ä¸ä¼šè¢«è€ƒè™‘ï¼Œä½†ä½ çš„ IDE åº”è¯¥ä¼šå¾—åˆ°æ›´å¥½çš„ç±»å‹æç¤ºã€‚

## ğŸ’€ åºŸå¼ƒ

å°½ç®¡æˆ‘ä»¬æ²¡æœ‰ä¸º Nuxt 2 ä¸­çš„ `build.extend` é’©å­è¿›è¡Œç±»å‹åŒ–æˆ–æ–‡æ¡£åŒ–ï¼Œä½†æˆ‘ä»¬ä¸€ç›´åœ¨ webpack æ„å»ºå™¨ä¸­è°ƒç”¨å®ƒã€‚æˆ‘ä»¬ç°åœ¨æ˜ç¡®å°†å…¶æ ‡è®°ä¸ºåºŸå¼ƒï¼Œå¹¶å°†åœ¨æœªæ¥çš„å°ç‰ˆæœ¬ä¸­åˆ é™¤ã€‚

## âœ… å‡çº§

åƒå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬å»ºè®®è¿è¡Œï¼š

```sh
npx nuxi upgrade --force
```

è¿™å°†åˆ·æ–°ä½ çš„ lockfileï¼Œå¹¶ç¡®ä¿ä½ æ‹‰å– Nuxt ä¾èµ–çš„å…¶ä»–ä¾èµ–é¡¹çš„æ›´æ–°ï¼Œç‰¹åˆ«æ˜¯åœ¨ unjs ç”Ÿæ€ç³»ç»Ÿä¸­ã€‚

## ğŸ“ƒ å®Œæ•´çš„å˜æ›´æ—¥å¿—

é˜…è¯»å®Œæ•´çš„å‘å¸ƒè¯´æ˜ï¼Œè¯·è®¿é—® https://github.com/nuxt/nuxt/releases/tag/v3.5.0
