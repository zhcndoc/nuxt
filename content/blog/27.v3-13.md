---
title: Nuxt 3.13
description: Nuxt 3.13 å‘å¸ƒäº† - æˆ‘ä»¬æ­£åœ¨å°†ä¸€äº›ä¸º Nuxt 4 æ„å»ºçš„æ–°ç‰¹æ€§è¿ç§»å›æ¥ï¼
navigation: false
image: /assets/blog/v3.13.png
authors:
  - name: Daniel Roe
    avatar:
      src: https://avatar.ikxin.com/github/danielroe
    to: https://bsky.app/profile/danielroe.dev
date: 2024-08-22T10:00:00.000Z
category: å‘å¸ƒ
---

## ğŸ˜ï¸ è·¯ç”±åˆ†ç»„

æˆ‘ä»¬ç°åœ¨æ”¯æŒä½¿ç”¨æ‹¬å·/æ–¹æ‹¬å·å‘½åç›®å½•ï¼Œä»¥æ•´ç†æ‚¨çš„è·¯ç”±ï¼Œè€Œä¸å½±å“è·¯å¾„ã€‚

ä¾‹å¦‚ï¼š

```bash [ç›®å½•ç»“æ„]
-| pages/
---| index.vue
---| (marketing)/
-----| about.vue
-----| contact.vue
```

è¿™å°†åœ¨æ‚¨çš„åº”ç”¨ä¸­ç”Ÿæˆ `/`ã€`/about` å’Œ `/contact` é¡µé¢ã€‚`marketing` ç»„åœ¨ URL ç»“æ„ä¸­è¢«å¿½ç•¥ã€‚

é˜…è¯»æ›´å¤šå†…å®¹è¯·æŸ¥çœ‹ [åŸå§‹ PR](https://github.com/nuxt/nuxt/pull/28276)ã€‚

## ğŸï¸ å²›å±¿ä¸å¤´éƒ¨å…ƒæ•°æ®

ç°åœ¨ï¼ŒæœåŠ¡å™¨ç»„ä»¶å²›å±¿å¯ä»¥æ“ä½œå¤´éƒ¨ï¼Œä¾‹å¦‚åœ¨æ¸²æŸ“æ—¶æ·»åŠ  SEO å…ƒæ•°æ®ã€‚

é˜…è¯»æ›´å¤šå†…å®¹è¯·æŸ¥çœ‹ [#27987](https://github.com/nuxt/nuxt/pull/27987)ã€‚

## ğŸª è‡ªå®šä¹‰é¢„å–è§¦å‘å™¨

æˆ‘ä»¬ç°åœ¨æ”¯æŒ `NuxtLink` çš„è‡ªå®šä¹‰é¢„å–è§¦å‘å™¨ ([#27846](https://github.com/nuxt/nuxt/pull/27846))ã€‚

ä¾‹å¦‚ï¼š

```vue [pages/index.vue]
<template>
  <div>
    <NuxtLink prefetch-on="interaction">
      å½“é¼ æ ‡æ‚¬åœæˆ–è·å¾—ç„¦ç‚¹æ—¶å°†è¿›è¡Œé¢„å–
    </NuxtLink>
    <!-- è¯·æ³¨æ„ï¼Œæ‚¨å¯èƒ½ä¸æƒ³åŒæ—¶å¯ç”¨è¿™ä¸¤ä¸ªé€‰é¡¹ï¼ -->
    <NuxtLink :prefetch-on="{ visibility: true, interaction: true }">
      å½“é¼ æ ‡æ‚¬åœ/è·å¾—ç„¦ç‚¹ - æˆ–å˜å¾—å¯è§æ—¶è¿›è¡Œé¢„å–
    </NuxtLink>
  </div>
</template>
```

æ‚¨è¿˜å¯ä»¥å…¨å±€å¯ç”¨/ç¦ç”¨è¿™äº›åŠŸèƒ½ï¼Œå¹¶åœ¨æ¯ä¸ªé“¾æ¥ä¸Šè¿›è¡Œè¦†ç›–ã€‚

ä¾‹å¦‚ï¼š

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  experimental: {
    defaults: {
      nuxtLink: {
        prefetch: true,
        prefetchOn: { visibility: false, interaction: true }
      }
    }
  }
})
```

## ğŸ—ºï¸ æ”¹è¿›çš„æœåŠ¡å™¨æºæ˜ å°„

åœ¨ä½¿ç”¨ `node --enable-source-maps` è¿è¡Œæ—¶ï¼Œæ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼ŒæœåŠ¡å™¨æ„å»ºä¸­çš„ Vue æ–‡ä»¶çš„æºæ˜ å°„æŒ‡å‘ Vite æ„å»ºè¾“å‡ºï¼ˆç±»ä¼¼äº `.nuxt/dist/server/_nuxt/index-O15BBwZ3.js`ï¼‰ã€‚

ç°åœ¨ï¼Œå³ä½¿åœ¨æ‚¨çš„ Nitro æ„å»ºä¹‹åï¼Œæ‚¨çš„æœåŠ¡å™¨æºæ˜ å°„ä¹Ÿå°†å¼•ç”¨æ‚¨çš„åŸå§‹æºæ–‡ä»¶ ([#28521](https://github.com/nuxt/nuxt/pull/28521))ã€‚

è¯·æ³¨æ„ï¼Œæé«˜æ„å»ºæ€§èƒ½çš„æœ€ç®€å•æ–¹æ³•ä¹‹ä¸€æ˜¯å…³é—­æºæ˜ å°„ï¼ˆå¦‚æœæ‚¨ä¸ä½¿ç”¨å®ƒä»¬ï¼‰ï¼Œæ‚¨å¯ä»¥åœ¨ `nuxt.config` ä¸­è½»æ¾åšåˆ°è¿™ä¸€ç‚¹ï¼š

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  sourcemap: {
    server: false,
    client: true,
  },
})
```

## ğŸ æ¨¡å—ä½œè€…çš„æ–°åŠŸèƒ½

åœ¨ Nuxt v4 å‘å¸ƒå‰ï¼Œæˆ‘ä»¬æ­£åœ¨ä¸ºæ¨¡å—ä½œè€…æ·»åŠ ä¸€äº›å…³é”®åŠŸèƒ½ï¼ŒåŒ…æ‹¬åœ¨éœ€è¦æ—¶æä¾›æ–°çš„ `isNuxtMajorVersion` å·¥å…· ([#27579](https://github.com/nuxt/nuxt/pull/27579)) å’Œä½¿ç”¨æ–°çš„ `defineNuxtModule().with()` æ–¹æ³•å¯¹åˆå¹¶æ¨¡å—é€‰é¡¹è¿›è¡Œæ›´å¥½çš„æ¨æ–­ç±»å‹ ([#27520](https://github.com/nuxt/nuxt/pull/27520))ã€‚

## âœ¨ æ”¹è¿›çš„å¼€å‘è­¦å‘Š

æˆ‘ä»¬ä¸å†è­¦å‘Šåœ¨ä¸­é—´ä»¶ä¸­ä½¿ç”¨æ•°æ®è·å–ç»„åˆå‡½æ•° ([#28604](https://github.com/nuxt/nuxt/pull/28604))ï¼Œå¹¶ä¸”å½“ç”¨æˆ·ç»„ä»¶çš„åç§°ä»¥ Lazy å¼€å¤´æ—¶ä¼šå‘å‡ºè­¦å‘Š ([#27838](https://github.com/nuxt/nuxt/pull/27838))ã€‚

## ğŸš¨ Vue TypeScript æ›´æ”¹

åœ¨ Vue ç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬åœ¨ä¸€æ®µæ—¶é—´å†…å¢è¡¥äº† `@vue/runtime-core` ä»¥æ·»åŠ è‡ªå®šä¹‰å±æ€§ç­‰åˆ° `vue`ã€‚ç„¶è€Œï¼Œè¿™æ— æ„ä¸­ç ´åäº†å¢å¼º `vue` çš„é¡¹ç›®çš„ç±»å‹ - è¿™ç°åœ¨æ˜¯å®˜æ–¹æ¨èå¹¶æ–‡æ¡£åŒ–çš„å¢å¼ºè¿™äº›æ¥å£çš„æ–¹å¼ï¼ˆä¾‹å¦‚ï¼Œ [ComponentCustomProperties](https://vue.zhcndoc.com/api/utility-types.html#componentcustomproperties)ã€[GlobalComponents](https://vue.zhcndoc.com/guide/extras/web-components.html#web-components-and-typescript) ç­‰ï¼‰ã€‚

è¿™æ„å‘³ç€ _æ‰€æœ‰_ åº“å¿…é¡»æ›´æ–°å®ƒä»¬çš„ä»£ç ï¼ˆå¦åˆ™ä¼šç ´åå¢å¼º `vue` çš„åº“çš„ç±»å‹ï¼‰ã€‚

æˆ‘ä»¬å·²ç»åœ¨ Nuxt ä¸­æ²¿ç€è¿™äº›æ–¹å‘æ›´æ–°äº†æˆ‘ä»¬çš„ç±»å‹ï¼Œä½†å½“æ‚¨ä½¿ç”¨å°šæœªæ›´æ–°çš„åº“æ—¶ï¼Œæ‚¨å¯èƒ½ä¼šé‡åˆ°ä¸æœ€æ–°çš„ `vue-router` çš„é—®é¢˜ã€‚

è¯·åˆ›å»ºä¸€ä¸ªå¸¦æœ‰å¤ç°çš„ issue - æˆ‘å¾ˆä¹æ„å¸®åŠ©æ‚¨åœ¨ç›¸å…³ä¸Šæ¸¸åº“ä¸­åˆ›å»º PR æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æˆ–è€…ï¼Œæ‚¨ä¹Ÿå¯ä»¥å°è¯•é€šè¿‡åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»º `declarations.d.ts` æ–‡ä»¶ï¼Œä½¿ç”¨ä»¥ä¸‹ä»£ç æ¥è§£å†³é—®é¢˜ ([credit](https://github.com/nuxt/nuxt/pull/28542#issuecomment-2293282891) ç»™ [@BobbieGoede](https://github.com/BobbieGoede))ï¼š

```ts [declarations.d.ts]
import type {
  ComponentCustomOptions as _ComponentCustomOptions,
  ComponentCustomProperties as _ComponentCustomProperties,
} from 'vue';

declare module '@vue/runtime-core' {
  interface ComponentCustomProperties extends _ComponentCustomProperties {}
  interface ComponentCustomOptions extends _ComponentCustomOptions {}
}
```

## âœ… å‡çº§

å’Œå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬çš„å‡çº§å»ºè®®æ˜¯è¿è¡Œï¼š

```sh
npx nuxi@latest upgrade --force
```

è¿™å°†åˆ·æ–°æ‚¨çš„é”æ–‡ä»¶ï¼Œå¹¶ç¡®ä¿æ‚¨æ‹‰å– Nuxt æ‰€ä¾èµ–çš„å…¶ä»–ä¾èµ–é¡¹çš„æ›´æ–°ï¼Œç‰¹åˆ«æ˜¯åœ¨ unjs ç”Ÿæ€ç³»ç»Ÿä¸­ã€‚

## å®Œæ•´çš„å‘å¸ƒè¯´æ˜

::read-more
---
color: gray
icon: i-simple-icons-github
target: _blank
to: https://github.com/nuxt/nuxt/releases/tag/v3.13.0
---
é˜…è¯» Nuxt `v3.13.0` çš„å®Œæ•´å‘å¸ƒè¯´æ˜ã€‚
::

éå¸¸æ„Ÿè°¢æ‰€æœ‰å‚ä¸æœ¬æ¬¡å‘å¸ƒçš„äºº - ä½ ä»¬æ˜¯è®© Nuxt æˆä¸ºå¯èƒ½çš„å…³é”®ã€‚ â¤ï¸

å¦‚æœæ‚¨æœ‰ä»»ä½•åé¦ˆæˆ–é—®é¢˜ï¼Œè¯·éšæ—¶å‘ŠçŸ¥æˆ‘ä»¬ï¼ ğŸ™
