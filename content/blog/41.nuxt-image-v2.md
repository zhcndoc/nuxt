---
title: Nuxt Image v2
description: Nuxt Image v2 æ­£å¼å‘å¸ƒ â€”â€” å®Œå…¨æ”¯æŒ TypeScriptã€IPX v3 ä»¥åŠå…¨æ–°æä¾›è€…ï¼
navigation: false
image: /assets/blog/nuxt-image-v2.png
authors:
  - name: Daniel Roe
    avatar:
      src: https://markhub.top/github/danielroe
    to: https://bsky.app/profile/danielroe.dev
date: 2025-11-05T10:00:00.000Z
category: Release
---

æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒ **Nuxt Image v2**ï¼ğŸ‰ æ­¤ç‰ˆæœ¬é‡ç‚¹æå‡äº† TypeScript æ”¯æŒã€æ€§èƒ½ä»¥åŠå¼€å‘è€…ä½“éªŒã€‚

::note
Nuxt Image v2 å…¼å®¹ Nuxt 3.1 åŠä»¥ä¸Šç‰ˆæœ¬ã€‚å¦‚æœä½ å½“å‰æ˜¯ Nuxt 3.0.x ç‰ˆæœ¬ï¼Œéœ€è¦å…ˆå‡çº§åˆ°è‡³å°‘ 3.1ã€‚
::

## ğŸ¯ TypeScript æ”¯æŒ

v2 æœ€å¤§çš„æ”¹è¿›æ˜¯æ¨¡å—å…¨å±€çš„ TypeScript æ”¯æŒ ([#1802](https://github.com/nuxt/image/pull/1802))ã€‚

### å¸¦ç±»å‹çš„ç»„åˆå¼å‡½æ•°

`$img` åŠ©æ‰‹å’Œ `useImage()` ç»„åˆå¼å‡½æ•°æ‹¥æœ‰å®Œæ•´çš„ç±»å‹æ¨æ–­ ([#1844](https://github.com/nuxt/image/pull/1844))ï¼š

```ts
const img = useImage()

// ä¿®é¥°ç¬¦å®Œå…¨è‡ªåŠ¨è¡¥å…¨
const url = img('/image.jpg', { 
  width: 300,
  height: 200,
  fit: 'cover' // TypeScript çŸ¥é“æœ‰æ•ˆçš„å€¼ï¼
})
```

### ç±»å‹å®‰å…¨çš„é…ç½®

æ¨¡å—é€‰é¡¹ç°åœ¨å®Œå…¨æ”¯æŒç±»å‹ã€‚ä¾‹å¦‚ï¼Œå¯¹éœ€è¦ `baseURL` çš„æä¾›è€…ï¼Œ`nuxt.config.ts` ä¼šåœ¨ç±»å‹å±‚çº§å¼ºåˆ¶è¦æ±‚ï¼š

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  image: {
    provider: 'bunny',
    bunny: {
      baseURL: '...' // ç¼ºå¤±ä¼šäº§ç”Ÿ TypeScript é”™è¯¯ï¼
    }
  }
})
```

### å¸¦ç±»å‹çš„æä¾›è€…

æœ€åï¼Œå¦‚æœä½ ä½¿ç”¨è‡ªå®šä¹‰å›¾ç‰‡æä¾›è€…ï¼Œå»ºè®®ä½¿ç”¨æ–°çš„ `defineProvider` æ¥å®ç°ç±»å‹å®‰å…¨é…ç½®ï¼š

```ts
// ä¹‹å‰ (v1)
export const getImage = (src, { modifiers, baseURL }) => {
  // ...
  return { url }
}

// ç°åœ¨ (v2)
import { defineProvider } from '@nuxt/image/runtime'

export default defineProvider({
  getImage(src, { modifiers, baseURL }) {
    // ä¿®é¥°ç¬¦æ‹¥æœ‰å®Œæ•´ç±»å‹
    // ...
    return { url }
  }
})
```

## ğŸš€ IPX v3

æˆ‘ä»¬å·²å‡çº§è‡³ IPX v3 ([#1799](https://github.com/nuxt/image/pull/1799))ï¼Œå¸¦æ¥æ›´é«˜æ€§èƒ½ä»¥åŠæ›´å¥½çš„ `sharp` äºŒè¿›åˆ¶å¤„ç†ã€‚å‡çº§æ”¯æŒè‡ªåŠ¨æ£€æµ‹é€‚åˆéƒ¨ç½²æ¶æ„çš„ `sharp` äºŒè¿›åˆ¶ã€‚

## ğŸ”Œ æœåŠ¡å™¨ç«¯å·¥å…·

ç°åœ¨ä½ å¯ä»¥ç›´æ¥åœ¨ Nitro æœåŠ¡å™¨ç«¯ç‚¹ä¸­ä½¿ç”¨å›¾ç‰‡åŠ©æ‰‹ ([#1473](https://github.com/nuxt/image/pull/1473))ã€‚

```ts [server/api/og-image.ts]
export default defineEventHandler((event) => {
  const img = useImage()
  
  return {
    url: img('/hero.jpg', { 
      width: 1200, 
      height: 630,
      fit: 'cover' 
    })
  }
})
```

## ğŸ¨ ç»„ä»¶æ”¹è¿›

### æ¨¡æ¿å¼•ç”¨

`<NuxtImg>` ç°é€šè¿‡æ¨¡æ¿å¼•ç”¨æš´éœ²åº•å±‚ `<img>` å…ƒç´ ï¼š

```vue
<script setup>
const img = useTemplateRef('img')

onMounted(() => {
  // ç›´æ¥è®¿é—®åŸç”Ÿ img å…ƒç´ 
  console.log(img.value.imgEl)
})
</script>

<template>
  <NuxtImg ref="img" src="/image.jpg" />
</template>
```

### ç±»å‹åŒ–æ’æ§½

`<NuxtImg>` å’Œ `<NuxtPicture>` å‡æä¾›äº†ç±»å‹åŒ–çš„é»˜è®¤æ’æ§½ã€‚

```vue
<template>
  <NuxtImg src="/image.jpg" custom>
    <template #default="{ imgAttrs, isLoaded, src }">
      <img v-bind="imgAttrs" :src="src">
      <span v-if="!isLoaded">åŠ è½½ä¸­...</span>
    </template>
  </NuxtImg>
</template>
```

æ’æ§½å‚æ•°è¯´æ˜ï¼š
- `imgAttrs` - æ‰€æœ‰è®¡ç®—åçš„å›¾ç‰‡å±æ€§ï¼ˆsizesã€srcset ç­‰ï¼‰
- `isLoaded` - å ä½ç¬¦æ˜¯å¦å·²åŠ è½½
- `src` - è®¡ç®—å¾—åˆ°çš„å›¾ç‰‡æº URL

## ğŸŒ æ–°æä¾›è€…

### Shopify

ç°åœ¨å¯ä»¥é…ç½® Shopify æä¾›è€… ([#1890](https://github.com/nuxt/image/pull/1890))ï¼š

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  image: {
    provider: 'shopify',
    shopify: {
      baseURL: 'https://your-store.myshopify.com'
    }
  }
})
```

### GitHub

æ­¤æä¾›è€…æ”¯æŒæ³¨å…¥ GitHub å¤´åƒåŠç”¨æˆ·å†…å®¹ ([#1990](https://github.com/nuxt/image/pull/1990))ï¼š

```vue
<!-- å®½é«˜éƒ½è®¾ç½® -->
<NuxtImg provider="github" src="nuxt" height="50" width="50" />

<!-- ä»…è®¾ç½®å®½åº¦ -->
<NuxtImg provider="github" src="unjs" width="512" />

<!-- é»˜è®¤å°ºå¯¸ -->
<NuxtImg provider="github" src="npm" />
```

## âš¡ æ€§èƒ½

æˆ‘ä»¬åšäº†å¤šé¡¹ä¼˜åŒ–ä»¥å‡å°‘åŒ…ä½“ç§¯å¹¶æå‡è¿è¡Œæ—¶æ€§èƒ½ï¼š

- **æ›´å¥½çš„ URL ç¼–ç ** ([#1813](https://github.com/nuxt/image/pull/1813)) â€” åˆ‡æ¢åˆ° `URLSearchParams`ï¼Œæ›´å¯é åœ°å¤„ç†å‚æ•°
- **ç²¾ç®€è¿è¡Œæ—¶å·¥å…·** ([#1816](https://github.com/nuxt/image/pull/1816)) â€” ç§»é™¤æœªä½¿ç”¨ä»£ç å¹¶ç®€åŒ–å®ç°
- **ä¼˜åŒ–å±å¹•å°ºå¯¸** ([#1931](https://github.com/nuxt/image/pull/1931)) â€” é»˜è®¤æ–­ç‚¹ä¸ Tailwind CSS å¯¹é½

## ğŸ¯ æ›´ä½³çš„å±‚æ”¯æŒ

Nuxt Image ç°åœ¨æ”¯æŒ Nuxt å±‚ä¸­çš„è‡ªå®šä¹‰å›¾ç‰‡ç›®å½• ([#1880](https://github.com/nuxt/image/pull/1880))ï¼Œæ›´æ–¹ä¾¿æ¨¡å—åŒ–é¡¹ç›®ä¸­ç»„ç»‡å›¾ç‰‡ã€‚

## âš ï¸ é‡å¤§å˜æ›´

### æä¾›è€… API

æœ€å¤§å˜æ›´æ˜¯æä¾›è€…å®šä¹‰æ–¹å¼ã€‚æ‰€æœ‰æä¾›è€…ç°åœ¨ä½¿ç”¨é»˜è®¤å¯¼å‡ºå¹¶é…åˆ `defineProvider`ï¼š

```diff
- export const getImage = (src, { modifiers }) => { ... }
+ export default defineProvider({
+   getImage(src, { modifiers }) { ... }
+ })
```

å¦‚æœä½ ç»´æŠ¤è‡ªå®šä¹‰æä¾›è€…ï¼Œéœ€è¦æ›´æ–°ä»£ç ã€‚ä½†å›æŠ¥æ˜¯å®Œæ•´çš„ TypeScript æ”¯æŒï¼

### ç§»é™¤çš„æä¾›è€…

åºŸå¼ƒçš„ `layer0` å’Œ `edgio` æä¾›è€…å·²è¢«ç§»é™¤ã€‚

### URL æ ¼å¼å™¨

å¦‚æœä½ æœ‰ä½¿ç”¨è¿‡ `joinWith` è¿›è¡Œå‚æ•°æ ¼å¼åŒ–çš„è‡ªå®šä¹‰æä¾›è€…ï¼Œè¯·æ”¹ç”¨å¸¦æœ‰ `createOperationsGenerator` çš„ `formatter` å‡½æ•°ã€‚è¯¦æƒ…è¯·å‚è§[è¿ç§»æŒ‡å—](https://image.nuxt.com/get-started/migration#url-formatter-changes)ã€‚

### å±å¹•å°ºå¯¸

é»˜è®¤å±å¹•å°ºå¯¸è°ƒæ•´ä¸ºåŒ¹é… Tailwind CSSï¼Œç§»é™¤äº† `xs` (320px) å’Œ `xxl` (2560px)ã€‚å…³äºå¦‚ä½•æ¢å¤è¿™äº›å°ºå¯¸ï¼Œè¯·è§[è¿ç§»æŒ‡å—](https://image.nuxt.com/get-started/migration#screen-size-changes)ã€‚

### ç§»é™¤çš„å·¥å…·

åˆ é™¤äº†è‹¥å¹²æœªä½¿ç”¨çš„è¿è¡Œæ—¶å·¥å…·ã€‚å¦‚æœä½ ç›´æ¥å¼•å…¥äº†å†…éƒ¨å·¥å…·ï¼Œè¯·æ£€æŸ¥å®ƒä»¬æ˜¯å¦ä»ç„¶å­˜åœ¨ã€‚

## âœ… å‡çº§

è¯·æŸ¥çœ‹æˆ‘ä»¬è¯¦å°½çš„[è¿ç§»æŒ‡å—](https://image.nuxt.com/get-started/migration)ï¼Œè·å–ä¸€æ­¥æ­¥çš„å‡çº§è¯´æ˜ã€‚

å¿«é€Ÿæ›´æ–°å‘½ä»¤ï¼š

```bash [Terminal]
npm install @nuxt/image@latest
```

å¤§å¤šæ•°åº”ç”¨æ— éœ€æ›´æ”¹ä»£ç å³å¯å‡çº§ã€‚å¦‚æœæœ‰è‡ªå®šä¹‰æä¾›è€…ï¼Œéœ€è¦æ›´æ–°ä¸ºä½¿ç”¨ `defineProvider` â€”â€” ç¤ºä¾‹è¯·å‚è€ƒ[è¿ç§»æŒ‡å—](https://image.nuxt.com/get-started/migration#custom-provider-updates)ã€‚

## ğŸ› Bug ä¿®å¤

æœ¬ç‰ˆæœ¬ä¿®å¤äº†è‹¥å¹²é—®é¢˜ï¼š

- **é¢„åŠ è½½é“¾æ¥**ï¼šä¿®å¤å¤šå¯†åº¦é¢„åŠ è½½æ—¶å•ä¸€å°ºå¯¸é—®é¢˜ ([#1851](https://github.com/nuxt/image/pull/1851))
- **è·¨åŸŸå±æ€§**ï¼šä¿®æ­£é¢„åŠ è½½é“¾æ¥çš„ crossorigin å±æ€§ ([#1836](https://github.com/nuxt/image/pull/1836))
- **æä¾›è€…æ ¼å¼**ï¼šAWS Amplify å’Œ Vercel ç°åœ¨æœ‰æ­£ç¡®çš„æ ¼å¼å…è®¸åˆ—è¡¨ ([#1996](https://github.com/nuxt/image/pull/1996))
- **Hygraph**ï¼šé˜²æ­¢å‡ºé”™çš„å›¾ç‰‡ URL ([#1999](https://github.com/nuxt/image/pull/1999))
- **é¢„è®¾å°ºå¯¸**ï¼šä¿®å¤ `sizes` æœªå®šä¹‰æ—¶é¢„è®¾å°ºå¯¸æœªåº”ç”¨çš„é—®é¢˜ ([#1919](https://github.com/nuxt/image/pull/1919))
- **Cloudflare**ï¼šæ— æ“ä½œæ—¶ä¸æ·»åŠ  baseURL ([#1790](https://github.com/nuxt/image/pull/1790))
- **IPX**ï¼šæä¾›å¤–éƒ¨ baseURL æ—¶å§‹ç»ˆä½¿ç”¨ IPX æä¾›è€… ([#1800](https://github.com/nuxt/image/pull/1800))

## ğŸ™ æ„Ÿè°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæ­¤æ¬¡å‘å¸ƒè´¡çŒ®åŠ›é‡çš„å¼€å‘è€…ï¼åŒ…æ‹¬æ•°åä½ç¤¾åŒºæˆå‘˜ï¼Œä»–ä»¬åœ¨åŠŸèƒ½å¼€å‘ã€ä¿®å¤é—®é¢˜ã€æ–‡æ¡£å®Œå–„å’Œåé¦ˆæ–¹é¢åšå‡ºäº†è´¡çŒ®ã€‚

## ğŸ“š èµ„æº

- [æ–‡æ¡£](https://image.nuxt.com)
- [GitHub ä»“åº“](https://github.com/nuxt/image)
- [è¿ç§»æŒ‡å—](https://image.nuxt.com/get-started/migration)

## ğŸ‘‰ å®Œæ•´å‘å¸ƒè¯´æ˜

::read-more
---
icon: i-simple-icons-github
target: _blank
to: https://github.com/nuxt/image/releases/tag/v2.0.0
---
é˜…è¯» Nuxt Image `v2.0.0` çš„å®Œæ•´å‘å¸ƒè¯´æ˜ã€‚
::

ç¥ä½ ä¼˜åŒ–æ„‰å¿«ï¼ğŸ–¼ï¸âœ¨
