---
title: 'ä»‹ç» Nuxt Scripts'
description: 'Nuxt Scripts ä¸ºç¬¬ä¸‰æ–¹è„šæœ¬æä¾›æ›´å¥½çš„æ€§èƒ½ã€éšç§ã€å®‰å…¨æ€§å’Œå¼€å‘è€…ä½“éªŒã€‚'
image: /assets/blog/nuxt-scripts/banner.png
authors:
  - name: Harlan Wilton
    avatarUrl: https://avatar.ikxin.com/github/harlan-zw
    link: https://github.com/harlan-zw
    twitter: harlan_zw
date: 2024-08-20
category: Release
---

Nuxt å›¢é˜Ÿä¸ [Chrome Aurora](https://developer.chrome.com/aurora) å›¢é˜Ÿåœ¨ Google çš„åˆä½œä¸‹ï¼Œå…´å¥‹åœ°å®£å¸ƒ [Nuxt Scripts](https://scripts.nuxt.com) çš„å…¬å¼€æµ‹è¯•ç‰ˆå‘å¸ƒã€‚

Nuxt Scripts æ˜¯å¤„ç†ç¬¬ä¸‰æ–¹è„šæœ¬çš„æ›´å¥½æ–¹å¼ï¼Œæä¾›äº†æ›´å¥½çš„æ€§èƒ½ã€éšç§ã€å®‰å…¨æ€§å’Œå¼€å‘è€…ä½“éªŒã€‚

![Nuxt Scripts Banner](/assets/blog/nuxt-scripts/banner.png){.border.border-gray-200.dark:border-gray-700.rounded-lg}

## å¼€å§‹ä½¿ç”¨ Nuxt Scripts

åœ¨ä¸€å¹´å‰ï¼ŒDaniel å‘å¸ƒäº†åˆæ­¥çš„ [Nuxt Scripts RFC](https://github.com/nuxt/nuxt/discussions/22016)ã€‚è¯¥ RFC æå‡ºäº†ä¸€ä¸ªæ¨¡å—ï¼Œæ—¨åœ¨â€œå…è®¸ç®¡ç†å’Œä¼˜åŒ–ç¬¬ä¸‰æ–¹è„šæœ¬ï¼Œéµå¾ªæ€§èƒ½å’Œåˆè§„ç½‘ç«™çš„æœ€ä½³å®è·µâ€ã€‚

æ‹¥æœ‰ [ä¸ªäººç»éªŒ](https://github.com/harlan-zw/nuxt-delay-hydration) è§£å†³ä¸ç¬¬ä¸‰æ–¹è„šæœ¬ç›¸å…³çš„æ€§èƒ½é—®é¢˜ï¼Œæˆ‘æ·±çŸ¥è¿™äº›æ€§èƒ½ä¼˜åŒ–ä¼šå¤šä¹ˆå›°éš¾ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»ç„¶æ¸´æœ›è¿æ¥è¿™ä¸ªæŒ‘æˆ˜ï¼Œå¹¶æ¥æ‰‹äº†é¡¹ç›®ã€‚

ä»¥ RFC ä¸ºç†å¿µçš„ç§å­ï¼Œæˆ‘å¼€å§‹åŸå‹è®¾è®¡å…¶å¯èƒ½çš„ [æ ·å­](https://github.com/nuxt/nuxt/discussions/22016#discussioncomment-6527001)ï¼Œå¹¶ä½¿ç”¨ [Unhead](https://unhead.unjs.io/) è¿›è¡Œå¼€å‘ã€‚

åœ¨æ€è€ƒæˆ‘å¸Œæœ›ç¡®åˆ‡æ„å»ºçš„å†…å®¹æ—¶ï¼Œæˆ‘å‘ç°çœŸæ­£çš„é—®é¢˜ä¸ä»…æ˜¯å¦‚ä½•åŠ è½½â€œä¼˜åŒ–è¿‡çš„â€ç¬¬ä¸‰æ–¹è„šæœ¬ï¼Œè€Œæ˜¯å¦‚ä½•æ•´ä½“ä¸Šæ”¹å–„ä¸ç¬¬ä¸‰æ–¹è„šæœ¬çš„åˆä½œä½“éªŒã€‚

## ä¸ºä»€ä¹ˆè¦æ„å»ºç¬¬ä¸‰æ–¹è„šæœ¬æ¨¡å—ï¼Ÿ

[94%çš„ç½‘ç«™è‡³å°‘ä½¿ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹æä¾›å•†](https://almanac.httparchive.org/en/2022/third-parties#prevalence)ï¼Œå¹³å‡æ¯ä¸ªç½‘ç«™æœ‰ [äº”ä¸ªç¬¬ä¸‰æ–¹æä¾›å•†](https://docs.google.com/spreadsheets/d/1YqoRRsyiNsrEabVLu2nRU98JIG_0zLLuoQhC2nX8xbM/edit?gid=1428106498#gid=1428106498)ã€‚

æˆ‘ä»¬çŸ¥é“ç¬¬ä¸‰æ–¹è„šæœ¬å¹¶ä¸å®Œç¾ï¼›å®ƒä»¬ [æ‹–æ…¢ç½‘é¡µé€Ÿåº¦](https://web.dev/articles/optimizing-content-efficiency-loading-third-party-javascript#)ï¼Œé€ æˆéšç§å’Œå®‰å…¨é—®é¢˜ï¼Œå¹¶ä¸”ä¸ä¹‹åˆä½œéå¸¸éº»çƒ¦ã€‚

ç„¶è€Œï¼Œå®ƒä»¬åœ¨æ ¹æœ¬ä¸Šæ˜¯æœ‰ç”¨çš„ï¼ŒçŸ­æœŸå†…ä¸ä¼šæ¶ˆå¤±ã€‚

é€šè¿‡æ¢ç´¢ç¬¬ä¸‰æ–¹è„šæœ¬çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯ä»¥è¿›è¡Œæ”¹è¿›çš„åœ°æ–¹ã€‚

### ğŸ˜’ å¼€å‘è€…ä½“éªŒï¼šå…¨æ ˆçš„å¤´ç—›

è®©æˆ‘ä»¬é€šè¿‡å‘æ‚¨çš„ Nuxt åº”ç”¨æ·»åŠ ä¸€ä¸ªè™šæ„çš„ `tracker.js` è„šæœ¬ï¼Œè¯¥è„šæœ¬å‘çª—å£æ·»åŠ  `track` å‡½æ•°ï¼Œæ¥äº†è§£ä¸€ä¸‹ã€‚

æˆ‘ä»¬å¼€å§‹ä½¿ç”¨ `useHead` åŠ è½½è„šæœ¬ã€‚

```ts
useHead({ scripts: [{ src: '/tracker.js', defer: true }] })
```

ä½†æ˜¯ï¼Œç°åœ¨æˆ‘ä»¬å°è¯•åœ¨åº”ç”¨ä¸­ä½¿è„šæœ¬åŠŸèƒ½æ­£å¸¸å·¥ä½œã€‚

åœ¨ Nuxt ä¸­å¤„ç†ç¬¬ä¸‰æ–¹è„šæœ¬æ—¶ï¼Œä»¥ä¸‹æ­¥éª¤æ˜¯å¸¸è§çš„ï¼š

- ä¸€åˆ‡å¿…é¡»åŒ…è£…ä»¥ç¡®ä¿ SSR å®‰å…¨ã€‚
- ä¸å¯é çš„æ£€æŸ¥ä»¥ç¡®è®¤è„šæœ¬æ˜¯å¦å·²åŠ è½½ã€‚
- ä¸ºç±»å‹å¢å¼ºçª—å£å¯¹è±¡ã€‚

::code-group

```vue [1: SSR å®‰å…¨]
<script setup>
// âŒ å“¦ä¸ï¼Œwindow æœªå®šä¹‰ï¼ 
// ğŸ’¡ å¦‚æœæˆ‘ä»¬åœ¨ Nuxt ä¸­ä½¿ç”¨ SSRï¼Œçª—å£æ— æ³•ç›´æ¥è®¿é—®ã€‚
// ğŸ‘‰ æˆ‘ä»¬éœ€è¦ç¡®ä¿è¿™ä¸ª SSR æ˜¯å®‰å…¨çš„
window.track('page_view', useRoute().path)
</script>
```

```vue [2: è„šæœ¬æ—¶æœº]
<script setup>
if (import.meta.client) {
  // âŒ å“¦ä¸ï¼Œè„šæœ¬å°šæœªåŠ è½½å®Œæˆï¼
  // ğŸ’¡ `defer` è„šæœ¬å¯èƒ½åœ¨æˆ‘ä»¬çš„ Nuxt åº”ç”¨æ°´åˆæœŸé—´ä¸å¯ç”¨ã€‚
  // ğŸ‘‰ æˆ‘ä»¬éœ€è¦ç­‰å¾…è„šæœ¬åŠ è½½å®Œæˆ
  window.track('page_view', useRoute().path)
}
</script>
```

```vue [3: ç±»å‹ç ´æŸ]
<script lang="ts" setup>
if (import.meta.client) {
  useTimeoutFn(() => {
    // âœ… æ­£åœ¨å·¥ä½œï¼
    // âŒ å“¦ä¸ï¼Œç±»å‹ç ´æŸã€‚
    // ğŸ’¡ `window` å…·æœ‰ä¸¥æ ¼ç±»å‹ï¼Œå¹¶ä¸”å°šæœªå®šä¹‰ä»»ä½•å†…å®¹ã€‚
    // ğŸ‘‰ æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å¢å¼ºçª—å£
    window.track('page_view', useRoute().path)
  }, 1000 /* åº”è¯¥åœ¨ 1 ç§’å†…åŠ è½½ï¼ï¼Ÿ */)
}
</script>
```

```vue [4: å®ƒå·¥ä½œå—ï¼Ÿ]
<script lang="ts" setup>
declare global {
  interface Window {
    track: (e: string, p: string) => void
  }
}
if (import.meta.client) {
  useTimeoutFn(() => {
    // âœ… å®ƒæ­£åœ¨å·¥ä½œä¸”ç±»å‹æœ‰æ•ˆï¼ 
    // âŒ å“¦ä¸ï¼Œå¹¿å‘Šæ‹¦æˆªå™¨ã€GDPR å’Œé‡å¤è„šæœ¬
    // ğŸ’¡ ç¬¬ä¸‰æ–¹è„šæœ¬ä¸­æœ‰è®¸å¤šéšè—çš„å¤æ‚æ€§
    // ğŸ‘‰ æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›´å¥½çš„ API
    window.track('page_view', useRoute().path)
  }, 1000)
}
</script>
```

::

### ğŸŒ æ€§èƒ½ï¼šâ€œä¸ºä»€ä¹ˆæˆ‘æ— æ³•åœ¨ Lighthouse ä¸Šè·å¾— 100ï¼Ÿâ€

ä¸ºäº†ä½¿è®¿é—®è€…èƒ½å¤Ÿå¼€å§‹ä¸æ‚¨çš„ Nuxt ç½‘ç«™äº’åŠ¨ï¼Œåº”ç”¨ç¨‹åºåŒ…éœ€è¦è¢«ä¸‹è½½ï¼ŒVue éœ€è¦å¯¹åº”ç”¨å®ä¾‹è¿›è¡Œæ°´åˆã€‚

åŠ è½½ç¬¬ä¸‰æ–¹è„šæœ¬å¯èƒ½ä¼šå¹²æ‰°æ­¤æ°´åˆè¿‡ç¨‹ï¼Œå³ä½¿ä½¿ç”¨ `async` æˆ– `defer`ã€‚è¿™ä¼šå‡æ…¢ç½‘ç»œé€Ÿåº¦å¹¶é˜»å¡ä¸»çº¿ç¨‹ï¼Œä»è€Œå¯¼è‡´ç”¨æˆ·ä½“éªŒä¸‹é™å’Œç³Ÿç³•çš„ [æ ¸å¿ƒç½‘ç»œæŒ‡æ ‡](https://web.dev/vitals/)ã€‚

[Chrome ç”¨æˆ·ä½“éªŒæŠ¥å‘Š](https://developer.chrome.com/docs/crux) æ˜¾ç¤ºï¼Œä½¿ç”¨è®¸å¤šç¬¬ä¸‰æ–¹èµ„æºçš„ Nuxt ç½‘ç«™é€šå¸¸åœ¨ [äº¤äº’åˆ°ä¸‹ä¸€ä¸ªç»˜åˆ¶ (INP)](https://web.dev/articles/inp) å’Œ [æœ€å¤§å†…å®¹ç»˜åˆ¶ (LCP)](https://web.dev/articles/lcp) åˆ†æ•°ä¸Šè¾ƒä½ã€‚

ä¸ºäº†æŸ¥çœ‹ç¬¬ä¸‰æ–¹è„šæœ¬å¦‚ä½•é™ä½æ€§èƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ [Web Almanac 2022](https://almanac.httparchive.org/en/2022/third-parties#impact-on-performance)ã€‚æŠ¥å‘Šæ˜¾ç¤ºï¼Œå‰10ä¸ªç¬¬ä¸‰æ–¹è„šæœ¬ **å¹³å‡ä¸­æ–­æ—¶é—´ä¸º 1.4 ç§’**ã€‚

### ğŸ›¡ï¸ éšç§ä¸å®‰å…¨ï¼šä¸åšåäº‹ï¼Ÿ

åœ¨å‰ 10,000 ä¸ªç½‘ç«™ä¸­ï¼Œæœ‰58%ç½‘ç«™å­˜åœ¨ [åœ¨å¤–éƒ¨ cookie ä¸­äº¤æ¢è·Ÿè¸ª ID çš„ç¬¬ä¸‰æ–¹è„šæœ¬](https://www3.cs.stonybrook.edu/~mikepo/papers/firstparty.www21.pdf)ï¼Œè¿™æ„å‘³ç€å®ƒä»¬å¯ä»¥åœ¨ç”¨æˆ·ç¦ç”¨ç¬¬ä¸‰æ–¹ cookie çš„æƒ…å†µä¸‹è·¨ç½‘ç«™è·Ÿè¸ªç”¨æˆ·ã€‚

è™½ç„¶åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨çš„æä¾›å•†çš„é€‰æ‹©å—åˆ°é™åˆ¶ï¼Œä½†æˆ‘ä»¬åº”è¯¥å°½é‡å‡å°‘æ³„éœ²ç»ˆç«¯ç”¨æˆ·æ•°æ®çš„æ•°é‡ã€‚

å½“æˆ‘ä»¬æ¶‰åŠéšç§é—®é¢˜æ—¶ï¼Œå‡†ç¡®ä¼ è¾¾è¿™äº›ä¿¡æ¯ä¹Ÿå¯èƒ½å¾ˆå›°éš¾ï¼Œå¹¶ä¸”éœ€è¦æ„å»ºæ‰€éœ€çš„åŒæ„ç®¡ç†ï¼Œä»¥éµå®ˆ GDPR ç­‰æ³•è§„ã€‚

ä½¿ç”¨ç¬¬ä¸‰æ–¹è„šæœ¬æ—¶å®‰å…¨æ€§ä¹Ÿæ˜¯ä¸€ä¸ªå…³æ³¨ç‚¹ã€‚ç¬¬ä¸‰æ–¹è„šæœ¬æ˜¯æ¶æ„è¡Œä¸ºè€…å¸¸ç”¨çš„æ”»å‡»å‘é‡ï¼Œå¤§å¤šæ•°å¹¶æœªä¸ºå…¶è„šæœ¬æä¾› `integrity` å“ˆå¸Œï¼Œè¿™æ„å‘³ç€å®ƒä»¬å¯ä»¥éšæ—¶è¢«ç ´åï¼Œå¹¶å°†æ¶æ„ä»£ç æ³¨å…¥åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ã€‚

## Nuxt Scripts å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜ï¼Ÿ

### å¯ç»„åˆçš„: useScript

è¿™ä¸ªå¯ç»„åˆå‡½æ•°ä½äº `<script>` æ ‡ç­¾å’Œæ·»åŠ åˆ° `window.{thirdPartyKey}` çš„åŠŸèƒ½ä¹‹é—´ã€‚

å¯¹äº `<script>` æ ‡ç­¾ï¼Œå¯ç»„åˆå‡½æ•°:
- å®Œå…¨æ˜¾ç¤ºè„šæœ¬çš„åŠ è½½å’Œé”™è¯¯çŠ¶æ€
- é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ Nuxt æ°´åˆåº”ç”¨æ—¶åŠ è½½è„šæœ¬ï¼Œä»¥è·å¾—ç¨å¾®æ›´å¥½çš„æ€§èƒ½ã€‚
- é™åˆ¶ `crossorigin` å’Œ `referrerpolicy` ä»¥æé«˜éšç§å’Œå®‰å…¨æ€§ã€‚
- æä¾›æ–¹æ³•ä»¥ [å»¶è¿ŸåŠ è½½è„šæœ¬](https://scripts.nuxt.com/docs/guides/script-triggers)ï¼Œç›´åˆ°éœ€è¦ä¸ºæ­¢ã€‚

å¯¹äºè„šæœ¬ APIï¼Œå®ƒï¼š
- æä¾›å®Œå…¨ç±»å‹å®‰å…¨çš„è„šæœ¬åŠŸèƒ½
- æ·»åŠ ä¸€ä¸ªä»£ç†å±‚ï¼Œå…è®¸ä½ çš„åº”ç”¨åœ¨è„šæœ¬åŠŸèƒ½å¤„äºä¸å®‰å…¨çš„ä¸Šä¸‹æ–‡ä¸­è¿è¡Œï¼ˆSSRã€è„šæœ¬æœªåŠ è½½å‰ã€è„šæœ¬è¢«é˜»æ­¢ï¼‰

::code-group

```ts [hello.ts]
const { proxy, onLoaded } = useScript('/hello.js', {
  trigger: 'onNuxtReady',
  use() {
    return window.helloWorld
  }
})

onLoaded(({ greeting }) => {
  // âœ… è„šæœ¬å·²åŠ è½½ï¼æŒ‚é’©åˆ° Vue ç”Ÿå‘½å‘¨æœŸ
})

// âœ… æˆ–è€…ä½¿ç”¨ä»£ç† API - å‹å¥½ SSRï¼Œåœ¨è„šæœ¬åŠ è½½æ—¶è°ƒç”¨
proxy.greeting() // Hello, World!

declare global {
  interface Window {
    helloWorld: {
      greeting: () => 'Hello World!'
    }
  }
}
```

```ts [hello.js]
window.helloWorld = {
  greeting() {
    console.log('Hello, World!')
  }
}
```

::

### è„šæœ¬æ³¨å†Œè¡¨

[è„šæœ¬æ³¨å†Œè¡¨](https://scripts.nuxt.com/scripts) æ˜¯ä¸€ä¸ªå¸¸è§ç¬¬ä¸‰æ–¹è„šæœ¬çš„ä¸€ç³»åˆ—ç¬¬ä¸€æ–¹é›†æˆã€‚å‘å¸ƒæ—¶ï¼Œæˆ‘ä»¬æ”¯æŒ 21 ä¸ªè„šæœ¬ï¼Œæœªæ¥è¿˜ä¼šæœ‰æ›´å¤šã€‚

![Nuxt Scripts Registry](/assets/blog/nuxt-scripts/registry.png){.border.border-gray-200.dark:border-gray-700.rounded-lg}

è¿™äº›æ³¨å†Œè¡¨è„šæœ¬æ˜¯å›´ç»• `useScript` è¿›è¡Œå¾®è°ƒçš„åŒ…è£…ï¼Œå…·æœ‰å®Œæ•´çš„ç±»å‹å®‰å…¨æ€§ï¼Œè¿è¡Œæ—¶éªŒè¯è„šæœ¬é€‰é¡¹ï¼ˆä»…é™å¼€å‘ï¼‰å’Œç¯å¢ƒå˜é‡æ”¯æŒã€‚

ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ [Fathom Analytics](https://scripts.nuxt.com/scripts/analytics/fathom-analytics) è„šæœ¬ã€‚

```ts
const { proxy } = useScriptFathomAnalytics({
  // âœ… é€‰é¡¹åœ¨è¿è¡Œæ—¶è¢«éªŒè¯
  site: undefined
})
// âœ… ç±»å‹å®‰å…¨
proxy.trackPageview()
```

### å¤–è§‚ç»„ä»¶

æ³¨å†Œè¡¨åŒ…å«å‡ ä¸ª [å¤–è§‚ç»„ä»¶](https://scripts.nuxt.com/docs/guides/facade-components)ï¼Œå¦‚
[Google Maps](https://scripts.nuxt.com/scripts/content/google-maps)ã€[YouTube](https://scripts.nuxt.com/scripts/content/youtube-player) å’Œ [Intercom](https://scripts.nuxt.com/scripts/support/intercom)ã€‚

å¤–è§‚ç»„ä»¶æ˜¯â€œè™šå‡â€ç»„ä»¶ï¼Œå½“ç¬¬ä¸‰æ–¹è„šæœ¬åŠ è½½æ—¶è¿›è¡Œæ°´åˆã€‚
å¤–è§‚ç»„ä»¶æœ‰æƒè¡¡ï¼Œä½†å¯ä»¥å¤§å¹…æé«˜æ‚¨çš„æ€§èƒ½ã€‚è¯·å‚é˜… [ä»€ä¹ˆæ˜¯å¤–è§‚ç»„ä»¶ï¼Ÿ](https://scripts.nuxt.com/docs/guides/facade-components#what-are-facade-components)ï¼Œ
äº†è§£æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œã€‚

Nuxt Scripts æä¾›å¤–è§‚ç»„ä»¶ä½œä¸ºå¯è®¿é—®ä½†æ— å¤´çš„ç»„ä»¶ï¼Œæ„å‘³ç€å®ƒä»¬é»˜è®¤ä¸å¸¦æ ·å¼ï¼Œ
ä½†æ·»åŠ å¿…è¦çš„å¯è®¿é—®æ€§æ•°æ®ã€‚

::code-group

:youtube-demo{label="è¾“å‡º"}

```vue [è¾“å…¥]
<script setup lang="ts">
const isLoaded = ref(false)
const isPlaying = ref(false)
const video = ref()
function play() {
  video.value?.player.playVideo()
}
function stateChange(state) {
  isPlaying.value = state.data === 1
}
</script>

<template>
  <ScriptYouTubePlayer ref="video" video-id="d_IFKP1Ofq0" @ready="isLoaded = true" @state-change="stateChange">
    <template #awaitingLoad>
      <div class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 h-[48px] w-[68px]">
        <svg height="100%" version="1.1" viewBox="0 0 68 48" width="100%"><path d="M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z" fill="#f00" /><path d="M 45,24 27,14 27,34" fill="#fff" /></svg>
      </div>
    </template>
  </ScriptYouTubePlayer>
</template>
```

::

### åŒæ„ç®¡ç†ä¸å…ƒç´ äº‹ä»¶è§¦å‘å™¨

`useScript` å¯ç»„åˆå‡½æ•°ä½¿æ‚¨å®Œå…¨æ§åˆ¶è„šæœ¬çš„åŠ è½½æ–¹å¼å’Œæ—¶æœºï¼Œå¯ä»¥é€šè¿‡æä¾›è‡ªå®šä¹‰ `trigger` æˆ–æ‰‹åŠ¨è°ƒç”¨ `load()` å‡½æ•°ã€‚

åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒNuxt Scripts æä¾›äº†é«˜çº§è§¦å‘å™¨ï¼Œä»¥ä½¿å…¶æ›´å®¹æ˜“ã€‚
- [åŒæ„ç®¡ç†](https://scripts.nuxt.com/docs/guides/consent) - ä»…åœ¨ç”¨æˆ·ç»™äºˆåŒæ„ååŠ è½½è„šæœ¬ï¼Œä¾‹å¦‚é€šè¿‡ cookie æ¨ªå¹…ã€‚
- [å…ƒç´ äº‹ä»¶è§¦å‘å™¨](https://scripts.nuxt.com/docs/guides/script-triggers#element-event-triggers) - æ ¹æ®ç”¨æˆ·äº¤äº’ï¼ˆå¦‚æ»šåŠ¨ã€ç‚¹å‡»æˆ–è¡¨å•æäº¤ï¼‰åŠ è½½è„šæœ¬ã€‚

```ts
const cookieConsentTrigger = useScriptTriggerConsent()
const { proxy } = useScript<{ greeting: () => void }>('/hello.js', {
  // ä»…åœ¨åŒæ„è¢«æ¥å—ååŠ è½½è„šæœ¬
  trigger: cookieConsentTrigger
})
// ...
function acceptCookies() {
  cookieConsentTrigger.accept()
}
// greeting() åœ¨ç”¨æˆ·æ¥å— cookies ä¹‹å‰ä¼šè¢«æ’é˜Ÿ
proxy.greeting()
```

### è„šæœ¬æ‰“åŒ…

åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä»ä¸€ä¸ªæˆ‘ä»¬æ— æ³•æ§åˆ¶çš„åŸŸåŠ è½½ç¬¬ä¸‰æ–¹è„šæœ¬ã€‚è¿™å¯èƒ½å¯¼è‡´è®¸å¤šé—®é¢˜ï¼š
- éšç§ï¼šç¬¬ä¸‰æ–¹è„šæœ¬å¯ä»¥è·¨ç«™ç‚¹è·Ÿè¸ªç”¨æˆ·ã€‚
- å®‰å…¨ï¼šç¬¬ä¸‰æ–¹è„šæœ¬å¯èƒ½è¢«ç ´åå¹¶æ³¨å…¥æ¶æ„ä»£ç ã€‚
- æ€§èƒ½ï¼šé¢å¤–çš„ DNS æŸ¥è¯¢ä¼šå‡æ…¢é¡µé¢åŠ è½½ã€‚
- å¼€å‘è€…ä½“éªŒï¼šç»è¿‡åŒæ„çš„è„šæœ¬å¯èƒ½ä¼šè¢«å¹¿å‘Šæ‹¦æˆªå™¨é˜»æ­¢ã€‚

ä¸ºæ­¤ï¼ŒNuxt Scripts æä¾›äº†ä¸€ç§å°†ç¬¬ä¸‰æ–¹è„šæœ¬æ‰“åŒ…åˆ°æ‚¨çš„å…¬å…±ç›®å½•è€Œæ— éœ€é¢å¤–å·¥ä½œçš„æ–¹æ³•ã€‚

```ts
useScript('https://cdn.jsdelivr.net/npm/js-confetti@latest/dist/js-confetti.browser.js', {
  bundle: true,
})
```

ç°åœ¨ï¼Œè¿™ä¸ªè„šæœ¬å°†ä» `/_scripts/{hash}` ä»¥æ‚¨çš„è‡ªå·±åŸŸåæä¾›ã€‚

## å¾…ç»­

æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œè¿˜æœ‰è®¸å¤šæœºä¼šå¯ä»¥æ”¹è¿›å¼€å‘è€…å’Œæœ€ç»ˆç”¨æˆ·çš„ç¬¬ä¸‰æ–¹è„šæœ¬ã€‚

Nuxt Scripts çš„åˆå§‹å‘å¸ƒè§£å†³äº† _ä¸€äº›_ è¿™äº›é—®é¢˜ï¼Œä½†æˆ‘ä»¬è¿˜æœ‰å¾ˆå¤šå·¥ä½œè¦åšã€‚

ä¸‹ä¸€æ­¥çš„è§„åˆ’é¡¹ç›®åŒ…æ‹¬ï¼š

- [æ·»åŠ  web worker æ”¯æŒ (Partytown)](https://github.com/nuxt/scripts/issues/182)
- [æ›´å¤šå®æ—¶èŠå¤©å¤–è§‚ç»„ä»¶](https://github.com/nuxt/scripts/issues/44)
- [å°†è„šæœ¬å¸è½½åˆ° Nuxt æœåŠ¡å™¨ä»£ç†](https://github.com/nuxt/scripts/issues/87)
- [Iframe è„šæœ¬æ²™ç®±](https://github.com/nuxt/scripts/issues/131)

æˆ‘ä»¬æ¬¢è¿æ‚¨çš„è´¡çŒ®å’Œæ”¯æŒã€‚

## å¼€å§‹ä½¿ç”¨

è¦å¼€å§‹ä½¿ç”¨ Nuxt Scriptsï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä»½ [æ•™ç¨‹](https://scripts.nuxt.com/docs/getting-started/confetti-tutorial) æ¥å¸®åŠ©æ‚¨å¿«é€Ÿä¸Šæ‰‹ã€‚

## æ„Ÿè°¢

- [Harlan Wilton - Nuxt](https://github.com/harlan-zw) (ä½œè€…)
- [Julien Huang - Nuxt](https://github.com/huang-julien) (è´¡çŒ®è€…)
- [Daniel Roe - Nuxt](https://github.com/danielroe) (è´¡çŒ®è€…)
- [Chrome Aurora - Google](https://developer.chrome.com/aurora) (è´¡çŒ®è€…)

å¹¶æ„Ÿè°¢æ—©æœŸçš„è´¡çŒ®è€…ä»¬ã€‚

![Nuxt Scripts Contributors](/assets/blog/nuxt-scripts/contributors.png){.border.border-gray-200.dark:border-gray-700.rounded-lg}
