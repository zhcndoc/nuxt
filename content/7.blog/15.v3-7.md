---
title: 'Nuxt 3.7'
description: "Nuxt 3.7 å·²å‘å¸ƒï¼Œå¸¦æ¥äº†æ–°çš„ CLIã€åŸç”Ÿ web streams å’Œ responseã€æ¸²æŸ“ä¼˜åŒ–ã€å¼‚æ­¥ä¸Šä¸‹æ–‡æ”¯æŒç­‰ç­‰åŠŸèƒ½ã€‚"
navigation: false
image: /assets/blog/v3.7.png
authors:
  - name: Daniel Roe
    avatarUrl: https://github.com/danielroe.png
    link: https://twitter.com/danielcroe
    twitter: danielcroe
date: 2023-08-25
category: Release
---

### ğŸ£ ä¸€ä¸ªæ–°çš„ CLI

æˆ‘ä»¬ä½¿ç”¨ [unjs/citty](http://github.com/unjs/citty) é‡æ„äº† `nuxi`ï¼Œè¿™æ˜¯ç¬¬ä¸€ä¸ªä¾èµ–äºæ–°ç‰ˆæœ¬çš„ Nuxt å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œå®‰å…¨åœ°æ”¾åœ¨äº†è‡ªå·±çš„ä»“åº“ä¸­ã€‚æˆ‘ä»¬å¯¹æ­¤æœ‰å¾ˆå¤§çš„è®¡åˆ’-åœ¨ [nuxt/cli](https://github.com/nuxt/cli) ä¸­å¯ä»¥æŸ¥çœ‹ä¸€äº›åŠŸèƒ½å’Œè·¯çº¿å›¾è®¨è®ºï¼Œå¹¶ä¸”è¯·éšæ—¶è¿›è¡Œè´¡çŒ®ï¼

- <a href="https://github.com/nuxt/cli/discussions/3" target="_blank"><strong>é¡¹ç›®ç›®æ ‡</strong></a>
- <a href="https://github.com/nuxt/cli/discussions/4" target="_blank">åé¦ˆå’Œæƒ³æ³•</a>
- <a href="https://github.com/nuxt/cli/discussions/7" target="_blank">Nuxt CLI ç”Ÿæˆç‰ˆæœ¬çš„å‘å±•ä¹‹è·¯</a>

Nuxi ç°åœ¨ä¸ä¸»è¦çš„ `nuxt` ç‰ˆæœ¬è§£è€¦-æˆ‘ä»¬è®¡åˆ’å°†æ¥æ›´å¿«åœ°è¿­ä»£å’Œå‘å¸ƒ nuxiï¼Œæ‰€ä»¥ä½ å¯ä»¥æœŸå¾…å³å°†æ¨å‡ºçš„æ–°åŠŸèƒ½ï¼

### ğŸ•¸ï¸ åŸç”Ÿ Web Streams å’Œ `Response`

é€šè¿‡æ”¹è¿› [unjs/h3](https://github.com/unjs/h3) å’Œ [unjs/nitro](https://github.com/unjs/nitro)ï¼Œç°åœ¨å¯ä»¥ç›´æ¥ä»æœåŠ¡å™¨è·¯ç”±è¿”å›ä¸€ä¸ª `Response` å¯¹è±¡ï¼Œè¿™æ„å‘³ç€ä½ è¿˜å¯ä»¥åœ¨ Nuxt ä¸­æœ¬åœ°åœ°è¿”å›å’Œå¤„ç† streamsã€‚

ğŸ‘‰ åœ¨ [unjs/h3](https://github.com/unjs/h3/releases) å’Œ [unjs/nitro](https://github.com/unjs/nitro/releases) çš„å‘å¸ƒè¯´æ˜ä¸­è¯¦ç»†äº†è§£æ›´å¤šç»†èŠ‚ã€‚

### ğŸ”¥ HTML æ¸²æŸ“ä¼˜åŒ–

è¿™ä¸ªç‰ˆæœ¬åœ¨ä»æœåŠ¡å™¨æ¸²æŸ“ HTML å“åº”æ–¹é¢æœ‰ä¸€äº›æ”¹è¿›ã€‚æˆ‘ä»¬ç°åœ¨åœ¨æ„å»ºæ—¶å†³å®šæ˜¯å¦é¢„åŠ è½½/é¢„å–èµ„æºï¼ˆæ‰€ä»¥ä½ å¯ä»¥åœ¨ `build:manifest` é’©å­ä¸­è‡ªå®šä¹‰æ­¤è®¾ç½®ï¼‰ã€‚æˆ‘ä»¬ç°åœ¨è¿˜ç›´æ¥åœ¨ `unhead` ä¸­ç®¡ç†å®ƒä»¬çš„ HTML æ¸²æŸ“ ([#22179](https://github.com/nuxt/nuxt/pull/22179))ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥é…ç½® `<link>`ã€`<meta>`ã€`<script>`ã€`<style>` ç­‰çš„ _é¡ºåº_ã€‚è€Œä¸”-åœ¨æˆ‘ä»¬çš„åˆæ­¥æµ‹è¯•ä¸­-é€Ÿåº¦ç”šè‡³æ›´å¿«ï¼

å¯ä»¥é€šè¿‡è®¾ç½® `experimental.headNext` æ ‡å¿—æ¥é€‰æ‹©å³å°†æ¨å‡ºçš„ head æ”¹è¿›ã€‚ç›®å‰è¿™åŒ…æ‹¬åŸºäº [capo.js](https://github.com/rviscomi/capo.js) çš„æ–°æ’åºç®—æ³• ([#22431](https://github.com/nuxt/nuxt/pull/22431))ï¼Œå¹¶å…è®¸åœ¨ `unhead` ä¸­å‘å¸ƒæœªæ¥çš„ä¼˜åŒ–ï¼š

```ts
export default defineNuxtConfig({
  experimental: {
    headNext: true
  }
})
```

éå¸¸æœŸå¾…ä½ çš„æƒ³æ³•-ä½ å¯ä»¥åœ¨[æ­¤è®¨è®º](https://github.com/nuxt/nuxt/discussions/22632)ä¸­å›å¤ä»»ä½•é—®é¢˜/åé¦ˆã€‚

### ğŸ› ï¸ æ„å»ºç¯å¢ƒå¿«æ·æ–¹å¼

åœ¨ä½ çš„ Nuxt é…ç½®ä¸­ï¼Œä½ ç°åœ¨å¯ä»¥ä½¿ç”¨ `$client` å’Œ `$server` å¿«æ·æ–¹å¼æ¥è½»æ¾å®šä¹‰ä¸“é—¨ç”¨äº Vite client/server ([#22302](https://github.com/nuxt/nuxt/pull/22302)) æˆ– webpack client/server ([#22304](https://github.com/nuxt/nuxt/pull/22304)) æ„å»ºçš„é…ç½®ã€‚ä»¥å‰åªèƒ½ä½¿ç”¨ `vite:extendConfig` å’Œ `webpack:config` é’©å­æ¥å®ç°è¿™ä¸€ç‚¹ã€‚

ä¾‹å¦‚ï¼š

```ts
export default defineNuxtConfig({
  vite: {
    $client: {
      build: {
        rollupOptions: {
          output: {
            chunkFileNames: '_nuxt/[hash].js',
            assetFileNames: '_nuxt/[hash][extname]',
            entryFileNames: '_nuxt/[hash].js'
          }
        }
      }
    }
  }
})
```

### âš¡ï¸ Vite 4.4

æˆ‘ä»¬é€‰æ‹©å–æ¶ˆå¯¹ Vite çš„æ¬¡è¦ç‰ˆæœ¬è¿›è¡Œå›ºå®šï¼Œè¿™æ„å‘³ç€æ¯å½“ Vite å‘å¸ƒä¸€ä¸ªæ–°çš„åŠŸèƒ½ç‰ˆæœ¬ï¼Œä½ éƒ½å¯ä»¥ç«‹å³é€‰æ‹©ä½¿ç”¨ã€‚Vite 4.4 å¸¦æ¥äº†è®¸å¤šä»¤äººå…´å¥‹çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬å®éªŒæ€§çš„ Lightning CSS æ”¯æŒç­‰ç­‰ï¼

ğŸ‘‰ åœ¨ [Vite å‘å¸ƒè¯´æ˜](https://github.com/vitejs/vite/blob/main/packages/vite/CHANGELOG.md#440-2023-07-06) ä¸­äº†è§£æ›´å¤šè¯¦æƒ…ã€‚

### ğŸ’ª TypeScript æ›´æ–°

æˆ‘ä»¬ç°åœ¨åœ¨ç”Ÿæˆçš„ `tsconfig.json` ä¸­ä»…ä½¿ç”¨çº¯ç²¹çš„ç›¸å¯¹è·¯å¾„ï¼Œè€Œä¸æ˜¯è®¾ç½® `baseUrl`ã€‚è¿™æ„å‘³ç€æ›´å¥½åœ°æ”¯æŒåƒ Docker é•œåƒè¿™æ ·çš„å¼€å‘ç¯å¢ƒï¼Œå…¶ä¸­ç»å¯¹è·¯å¾„å¯èƒ½ä¸ä½ çš„ IDE ä¸åŒ¹é… ([#22410](https://github.com/nuxt/nuxt/pull/22410))ã€‚

æˆ‘ä»¬è¿˜è®¾ç½®äº†ä¸€äº›é¢å¤–çš„ç¼–è¯‘å™¨æ ‡å¿—é»˜è®¤å€¼ï¼Œä»¥ä¸ Vite/TS çš„å»ºè®®ç›¸åŒ¹é… ([#22468](https://github.com/nuxt/nuxt/pull/22468))ã€‚

æ­¤å¤–ï¼Œåœ¨ `setPageLayout` å’Œ `<NuxtLayout name>` ä¸­ï¼Œä½ ç°åœ¨åº”è¯¥è·å¾—å¯¹å¸ƒå±€çš„ç±»å‹æç¤º ([#22363](https://github.com/nuxt/nuxt/pull/22362))ã€‚

### ğŸ¦„ å¼‚æ­¥ä¸Šä¸‹æ–‡æ”¯æŒ

å¦‚æœä½ é‡åˆ°è¿‡ "Nuxt ä¸Šä¸‹æ–‡ä¸å¯ç”¨" çš„é—®é¢˜ï¼Œè¿™å¯èƒ½å¯¹ä½ æœ‰ç”¨ã€‚æˆ‘ä»¬ç°åœ¨åœ¨ Bun å’Œ Node ä¸‹æ”¯æŒæœ¬æœºå¼‚æ­¥ä¸Šä¸‹æ–‡ï¼Œä¸è¿‡æ˜¯åœ¨å®éªŒæ€§æ ‡å¿—ä¸‹ï¼Œåœ¨ Nuxt å’Œ Nitro ä¸­éƒ½æ”¯æŒ ([#20918](https://github.com/nuxt/nuxt/pull/20918))ã€‚

è¿™ä½¿å¾—ä½ å¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ Nuxt ç»„åˆå¼ API _è€Œä¸éœ€è¦ç¡®ä¿å®ƒä»¬åœ¨è®¾ç½®å‡½æ•°ä¸­ç›´æ¥è°ƒç”¨ã€‚å¯¹äº Nitroï¼Œå®ƒè¿˜å…è®¸åœ¨æœåŠ¡å™¨è·¯ç”±ä¸­ä½¿ç”¨æ–°çš„ `useEvent()` å®ç”¨å·¥å…·ã€‚

è¦å°è¯•å®ƒï¼Œè¯·å¯ç”¨ `experimental.asyncContext`ï¼š

```ts
export default defineNuxtConfig({
  experimental: {
    asyncContext: true
  }
})
```

### ğŸ‘“ Watcher æ›´æ–°

æˆ‘ä»¬ä¿®å¤äº†ä¸€äº›å…³äº watcher çš„é—®é¢˜ï¼Œæ„å‘³ç€ä½ åº”è¯¥éœ€è¦æ›´å°‘åœ°é‡æ–°å¯åŠ¨æœåŠ¡å™¨-å¦‚æœä½ ä½¿ç”¨çš„æ˜¯å›¾å±‚ï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚

### âš—ï¸ Nitro 2.6

æ¥è‡ª Nitro 2.6 çš„æ›´å¤šä»¤äººå…´å¥‹çš„åŠŸèƒ½æ­£åœ¨åˆ°æ¥ï¼ŒåŒ…æ‹¬æ›´å°ã€æ›´è½»çš„æœåŠ¡å™¨å’Œä¸€ä¸ª `.data` ç›®å½•ä¸­çš„æ–°æŒä¹…æ•°æ®å­˜å‚¨ã€‚

ğŸ‘‰ åœ¨[å®Œæ•´çš„å‘å¸ƒæ–‡ç« ](https://unjs.io/blog/2023-08-25-nitro-2.6)ä¸­é˜…è¯»æ›´å¤šè¯¦æƒ…ã€‚

## âœ… å‡çº§

åƒå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬å»ºè®®è¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå‡çº§ï¼š

```sh
npx nuxi upgrade --force
```

è¿™å°†åˆ·æ–°ä½ çš„é”æ–‡ä»¶ï¼Œå¹¶ç¡®ä¿ä½ æ‹‰å– Nuxt ä¾èµ–çš„å…¶ä»–ä¾èµ–é¡¹çš„æ›´æ–°ï¼Œå°¤å…¶æ˜¯åœ¨ [unjs](https://github.com/unjs) ç”Ÿæ€ç³»ç»Ÿä¸­ã€‚


## ğŸ“ƒ å®Œæ•´çš„æ›´æ–°æ—¥å¿—

åœ¨ https://github.com/nuxt/nuxt/releases/tag/v3.7.0 ä¸Šé˜…è¯»å®Œæ•´çš„å‘å¸ƒè¯´æ˜ã€‚
